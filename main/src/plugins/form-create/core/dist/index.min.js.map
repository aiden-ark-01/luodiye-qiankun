{"version":3,"file":"index.min.js","sources":["../../utils/lib/modify.js","../../utils/lib/extend.js","../src/components/formCreate.js","../../utils/lib/type.js","../../utils/lib/mergeprops.js","../src/frame/attrs.js","../../utils/lib/deepextend.js","../../utils/lib/console.js","../src/frame/util.js","../../utils/lib/toarray.js","../../utils/lib/tostring.js","../../utils/lib/toline.js","../../utils/lib/unique.js","../../utils/lib/deepset.js","../src/factory/creator.js","../src/factory/maker.js","../src/frame/api.js","../src/render/cache.js","../../utils/lib/tocase.js","../src/render/render.js","../src/render/index.js","../src/handler/inject.js","../src/handler/page.js","../src/handler/render.js","../src/factory/context.js","../src/handler/loader.js","../src/handler/input.js","../src/handler/helper.js","../src/factory/parser.js","../src/handler/context.js","../src/handler/lifecycle.js","../src/handler/effect.js","../src/handler/index.js","../src/frame/fetch.js","../src/components/fragment.js","../src/factory/node.js","../src/factory/manager.js","../src/frame/provider.js","../src/frame/index.js"],"sourcesContent":["import Vue from 'vue';\n\nexport function $set(target, field, value) {\n    Vue.set(target, field, value);\n}\n\nexport function $del(target, field) {\n    Vue.delete(target, field);\n}\n","import {$set} from './modify';\n\nconst _extends = Object.assign || function (a) {\n    for (let b, c = 1; c < arguments.length; c++) {\n        for (let d in b = arguments[c], b) {\n            Object.prototype.hasOwnProperty.call(b, d) && ($set(a, d, b[d]));\n        }\n    }\n\n    return a;\n}\n\nexport default function extend() {\n    return _extends.apply(this, arguments);\n}\n\nexport function copy(obj) {\n    if (typeof obj !== 'object' || obj === null) return obj;\n    return obj instanceof Array ? [...obj] : {...obj};\n}\n","import extend from '@form-create/utils/lib/extend';\n\nconst NAME = 'FormCreate';\n\nexport default function $FormCreate(FormCreate) {\n    return {\n        name: NAME,\n        componentName: NAME,\n        model: {\n            prop: 'api'\n        },\n        provide() {\n            return {\n                $pfc: this,\n            }\n        },\n        inject: {$pfc: {default: null}},\n        props: {\n            rule: {\n                type: Array,\n                required: true\n            },\n            option: {\n                type: Object,\n                default: () => {\n                    return {};\n                }\n            },\n            extendOption: Boolean,\n            value: Object,\n            api: Object,\n        },\n        data() {\n            return {\n                formData: undefined,\n                destroyed: false,\n                validate: {},\n                $f: undefined,\n                isShow: true,\n                unique: 1,\n                renderRule: [...this.rule || []],\n                updateValue: ''\n            };\n        },\n        render() {\n            return this.formCreate.render();\n        },\n        methods: {\n            _refresh() {\n                ++this.unique;\n            },\n            _renderRule() {\n                this.renderRule = [...this.rule || []];\n            },\n            _updateValue(value) {\n                if (this.destroyed) return;\n                this.updateValue = JSON.stringify(value);\n                this.$emit('update:value', value);\n            }\n        },\n        watch: {\n            value: {\n                handler(n) {\n                    if (JSON.stringify(n) === this.updateValue) return;\n                    this.$f.setValue(n);\n                },\n                deep: true\n            },\n            option: {\n                handler(n) {\n                    this.formCreate.initOptions(n);\n                    this.$f.refresh();\n                },\n                deep: true\n            },\n            rule(n) {\n                if (n.length === this.renderRule.length && n.every(v => this.renderRule.indexOf(v) > -1)) return;\n                this.formCreate.$handle.reloadRule(n);\n                this._renderRule();\n            }\n        },\n        beforeCreate() {\n            const {rule, option, value} = this.$options.propsData;\n            this.formCreate = new FormCreate(this, rule, option);\n            extend(this.formCreate.options.formData, value || {});\n            Object.keys(this.formCreate.prop).forEach(k => {\n                extend(this.$options[k], this.formCreate.prop[k]);\n            })\n        },\n    }\n}\n","const is = {\n    type(arg, type) {\n        return Object.prototype.toString.call(arg) === '[object ' + type + ']'\n    },\n    Undef(v) {\n        return v === undefined || v === null\n    },\n    Element(arg) {\n        return typeof arg === 'object' && arg !== null && arg.nodeType === 1 && !is.Object(arg)\n    },\n    trueArray(data) {\n        return Array.isArray(data) && data.length > 0;\n    }\n};\n\n['Date', 'Object', 'Function', 'String', 'Boolean', 'Array', 'Number'].forEach(t => {\n    is[t] = function (arg) {\n        return is.type(arg, t);\n    }\n})\n\nexport function hasProperty(rule, k) {\n    return ({}).hasOwnProperty.call(rule, k)\n}\n\nexport default is;\n","export const normalMerge = ['attrs', 'props', 'domProps', 'scopedSlots'];\nexport const toArrayMerge = ['class', 'style', 'directives'];\nexport const functionalMerge = ['on', 'nativeOn'];\n\nconst mergeProps = (objects, initial = {}, opt = {}) => {\n    const _normalMerge = [...normalMerge, ...opt['normal'] || []];\n    const _toArrayMerge = [...toArrayMerge, ...opt['array'] || []];\n    const _functionalMerge = [...functionalMerge, ...opt['functional'] || []];\n    const propsMerge = opt['props'] || [];\n\n    return objects.reduce((a, b) => {\n        for (const key in b) {\n            if (a[key]) {\n                if (propsMerge.indexOf(key) > -1) {\n                    a[key] = mergeProps([b[key]], a[key]);\n                } else if (_normalMerge.indexOf(key) > -1) {\n                    a[key] = {...a[key], ...b[key]}\n                } else if (_toArrayMerge.indexOf(key) > -1) {\n                    const arrA = a[key] instanceof Array ? a[key] : [a[key]];\n                    const arrB = b[key] instanceof Array ? b[key] : [b[key]];\n                    a[key] = [...arrA, ...arrB]\n                } else if (_functionalMerge.indexOf(key) > -1) {\n                    for (const event in b[key]) {\n                        if (a[key][event]) {\n                            const arrA = a[key][event] instanceof Array ? a[key][event] : [a[key][event]];\n                            const arrB = b[key][event] instanceof Array ? b[key][event] : [b[key][event]];\n                            a[key][event] = [...arrA, ...arrB]\n                        } else {\n                            a[key][event] = b[key][event]\n                        }\n                    }\n                } else if (key === 'hook') {\n                    for (let hook in b[key]) {\n                        if (a[key][hook]) {\n                            a[key][hook] = mergeFn(a[key][hook], b[key][hook])\n                        } else {\n                            a[key][hook] = b[key][hook]\n                        }\n                    }\n                } else {\n                    a[key] = b[key]\n                }\n            } else {\n                if (_normalMerge.indexOf(key) > -1 || _functionalMerge.indexOf(key) > -1 || propsMerge.indexOf(key) > -1) {\n                    a[key] = {...b[key]}\n                } else if (_toArrayMerge.indexOf(key) > -1) {\n                    a[key] = b[key] instanceof Array ? [...b[key]] : (typeof b[key] === 'object' ? {...b[key]} : b[key]);\n                } else\n                    a[key] = b[key];\n            }\n        }\n        return a\n    }, initial);\n}\n\nconst mergeFn = (fn1, fn2) =>\n    function () {\n        fn1 && fn1.apply(this, arguments);\n        fn2 && fn2.apply(this, arguments);\n    };\n\nexport default mergeProps;\n","import {functionalMerge, normalMerge, toArrayMerge} from '@form-create/utils/lib/mergeprops';\n\n\nexport const keyAttrs = ['type', 'slot', 'emitPrefix', 'value', 'name', 'native', 'hidden', 'display', 'inject', 'options', 'emit', 'nativeEmit', 'link', 'prefix', 'suffix', 'update', 'sync', 'optionsTo', 'key'];\n\nexport const arrayAttrs = ['validate', 'children', 'control'];\n\nexport const normalAttrs = ['effect'];\n\nexport function attrs() {\n    return [...keyAttrs, ...normalMerge, ...toArrayMerge, ...functionalMerge, ...arrayAttrs, ...normalAttrs];\n}\n","import {$set} from './modify';\nimport is from './type';\n\nexport default function deepExtend(origin, target = {}, mode) {\n    let isArr = false;\n    for (let key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n            let clone = target[key];\n            if ((isArr = Array.isArray(clone)) || is.Object(clone)) {\n                let nst = origin[key] === undefined;\n                if (isArr) {\n                    isArr = false;\n                    nst && $set(origin, key, []);\n                } else if (clone._clone && mode !== undefined) {\n                    if (mode) {\n                        clone = clone.getRule();\n                        nst && $set(origin, key, {});\n                    } else {\n                        $set(origin, key, clone._clone());\n                        continue;\n                    }\n                } else {\n                    nst && $set(origin, key, {});\n                }\n                origin[key] = deepExtend(origin[key], clone, mode);\n            } else {\n                $set(origin, key, clone);\n            }\n        }\n    }\n    return (mode !== undefined && Array.isArray(origin)) ? origin.filter(v => !v || !v.__ctrl) : origin\n}\n\nexport function deepCopy(value) {\n    return deepExtend({}, {value}).value;\n}\n\nexport function deepExtendArgs(origin, ...lst) {\n    lst.forEach(target => {\n        origin = deepExtend(origin, target);\n    });\n    return origin;\n}\n","export function format(type, msg, rule) {\n    return (`[form-create ${type}]: ${msg}` + (rule ? ('\\n\\nrule: ' + JSON.stringify(rule.getRule ? rule.getRule() : rule)) : ''))\n}\n\nexport function tip(msg, rule) {\n    console.warn(format('tip', msg, rule));\n}\n\nexport function err(msg, rule) {\n    console.error(format('err', msg, rule));\n}\n\nexport function logError(e) {\n    err(e.toString());\n    console.error(e);\n}\n","import deepExtend from '@form-create/utils/lib/deepextend';\nimport is from '@form-create/utils/lib/type';\nimport mergeProps from '@form-create/utils/lib/mergeprops';\nimport {arrayAttrs, normalAttrs} from './attrs';\nimport {err, logError} from '@form-create/utils/lib/console';\n\nconst PREFIX = '[[FORM-CREATE-PREFIX-';\nconst SUFFIX = '-FORM-CREATE-SUFFIX]]';\n\nconst $T = '$FN:';\nconst FUNCTION = 'function';\n\nexport function toJson(obj, space) {\n    return JSON.stringify(deepExtend([], obj, true), function (key, val) {\n        if (val && val._isVue === true)\n            return undefined;\n\n        if (typeof val !== FUNCTION) {\n            return val;\n        }\n        if (val.__inject)\n            val = val.__origin;\n\n        if (val.__emit)\n            return undefined;\n\n        return PREFIX + val + SUFFIX;\n    }, space);\n}\n\nfunction makeFn(fn) {\n    return eval('(' + FUNCTION + '(){return ' + fn + ' })()')\n}\n\nexport function parseFn(fn, mode) {\n    if (fn && is.String(fn)) {\n        let v = fn.trim();\n        let flag = false;\n        if (v.indexOf(SUFFIX) > 0 && v.indexOf(PREFIX) === 0) {\n            v = v.replace(SUFFIX, '').replace(PREFIX, '');\n            flag = true;\n        } else if (v.indexOf($T) === 0) {\n            v = v.replace($T, '');\n            flag = true;\n        }else if(!mode && v.indexOf(FUNCTION) === 0 && v !== FUNCTION){\n            flag = true;\n        }\n        if(!flag) return  fn;\n        try{\n            return makeFn(v.indexOf(FUNCTION) === -1 && v.indexOf('(') !== 0 ? (FUNCTION + ' ' + v) : v);\n        }catch (e){\n            err(`解析失败:${v}`);\n            return undefined;\n        }\n    }\n    return fn;\n}\n\nexport function parseJson(json, mode) {\n    return JSON.parse(json, function (k, v) {\n        if (is.Undef(v) || !v.indexOf) return v;\n        return parseFn(v, mode);\n    });\n}\n\nexport function enumerable(value, writable) {\n    return {\n        value,\n        enumerable: false,\n        configurable: false,\n        writable: !!writable\n    }\n}\n\n//todo 优化位置\nexport function copyRule(rule, mode) {\n    return copyRules([rule], mode || false)[0];\n}\n\nexport function copyRules(rules, mode) {\n    return deepExtend([], [...rules], mode || false);\n}\n\nexport function mergeRule(rule, merge) {\n    mergeProps(Array.isArray(merge) ? merge : [merge], rule, {array: arrayAttrs, normal: normalAttrs});\n    return rule;\n}\n\nexport function getRule(rule) {\n    return is.Function(rule.getRule) ? rule.getRule() : rule;\n}\n\nexport function mergeGlobal(target, merge) {\n    if (!target) return merge;\n    Object.keys(merge || {}).forEach((k) => {\n        if (merge[k]) {\n            target[k] = mergeRule(target[k] || {}, merge[k])\n        }\n    });\n    return target;\n}\n\nexport function funcProxy(that, proxy) {\n    Object.defineProperties(that, Object.keys(proxy).reduce((initial, k) => {\n        initial[k] = {\n            get() {\n                return proxy[k]();\n            }\n        }\n        return initial;\n    }, {}))\n}\n\nexport function byCtx(rule) {\n    return rule.__fc__ || (rule.__origin__ ? rule.__origin__.__fc__ : null)\n}\n\nexport function invoke(fn, def) {\n    try {\n        def = fn()\n    } catch (e) {\n        logError(e);\n    }\n    return def;\n}\n","export default function toArray(value) {\n    return Array.isArray(value)\n        ? value\n        : ([null, undefined, ''].indexOf(value) > -1 ? [] : [value]);\n}\n","export default function toString(val) {\n    return val == null\n        ? ''\n        : typeof val === 'object'\n            ? JSON.stringify(val, null, 2)\n            : String(val)\n}\n","export default function toLine(name) {\n    let line = name.replace(/([A-Z])/g, '-$1').toLocaleLowerCase();\n    if (line.indexOf('-') === 0)\n        line = line.substr(1);\n    return line;\n}\n","let id = 0;\n\nexport default function uniqueId() {\n    return Math.random().toString(36).substr(3, 3) + Number(`${Date.now()}${++id}`).toString(36);\n}\n","export default function deepSet(data, idx, val) {\n    let _data = data, to;\n    (idx || '').split('.').forEach(v => {\n        if (to) {\n            if(!_data[to]) {\n                _data[to] = {}\n            }\n            _data = _data[to];\n        }\n        to = v;\n    })\n    _data[to] = val;\n    return _data;\n}","import extend from '@form-create/utils/lib/extend';\nimport is from '@form-create/utils/lib/type';\nimport {attrs} from '../frame/attrs';\nimport {copyRule, mergeRule} from '../frame/util';\nimport {$set} from '@form-create/utils/lib';\n\nexport function baseRule() {\n    return {\n        props: {},\n        on: {},\n        options: [],\n        children: [],\n        hidden: false,\n        display: true,\n        value: undefined,\n    };\n}\n\nexport function creatorFactory(name, init) {\n    return (title, field, value, props = {}) => {\n        const maker = new Creator(name, title, field, value, props);\n        if (init) {\n            if (is.Function(init)) init(maker);\n            else maker.props(init);\n        }\n        return maker;\n    };\n}\n\nexport default function Creator(type, title, field, value, props) {\n    this._data = extend(baseRule(), {type, title, field, value, props: props || {}});\n    this.event = this.on;\n}\n\nextend(Creator.prototype, {\n    getRule() {\n        return this._data;\n    },\n    setProp(key, value) {\n        $set(this._data, key, value);\n        return this;\n    },\n    _clone() {\n        const clone = new this.constructor();\n        clone._data = copyRule(this._data);\n        return clone;\n    },\n})\n\nexport function appendProto(attrs) {\n    attrs.forEach(name => {\n        Creator.prototype[name] = function (key) {\n            mergeRule(this._data, {[name]: arguments.length < 2 ? key : {[key]: arguments[1]}})\n            return this;\n        };\n    });\n}\n\nappendProto(attrs());\n","import {creatorFactory} from './creator';\n\nconst commonMaker = creatorFactory('');\n\nexport function create(type, field, title) {\n    let make = commonMaker('', field);\n    make._data.type = type;\n    make._data.title = title;\n    return make;\n}\n\nexport function createTmp(template, vm, field, title) {\n    let make = commonMaker('', field);\n    make._data.type = 'template';\n    make._data.template = template;\n    make._data.title = title;\n    make._data.vm = vm;\n    return make;\n}\n\nexport default function makerFactory() {\n    return {\n        create,\n        createTmp,\n        template: createTmp,\n        factory: creatorFactory\n    };\n}\n","import {byCtx, invoke, mergeRule, toJson} from './util';\nimport {$set} from '@form-create/utils/lib/modify';\nimport {deepCopy} from '@form-create/utils/lib/deepextend';\nimport is, {hasProperty} from '@form-create/utils/lib/type';\nimport extend from '@form-create/utils/lib/extend';\nimport {err, format} from '@form-create/utils/lib/console';\n\n\nfunction copy(value) {\n    return deepCopy(value);\n}\n\nfunction byRules(ctxs, origin) {\n    return Object.keys(ctxs).reduce((initial, key) => {\n        initial[key] = origin ? ctxs[key].origin : ctxs[key].rule;\n        return initial;\n    }, {});\n}\n\nexport default function Api(h) {\n\n    function tidyFields(fields) {\n        if (is.Undef(fields))\n            fields = h.fields();\n        else if (!Array.isArray(fields))\n            fields = [fields];\n        return fields;\n    }\n\n    function props(fields, key, val) {\n        tidyFields(fields).forEach(field => {\n            const ctx = h.getCtx(field);\n            if (!ctx) return;\n            $set(ctx.rule, key, val);\n            h.$render.clearCache(ctx);\n        })\n    }\n\n    function allSubForm() {\n        const subs = h.subForm;\n        return Object.keys(subs).reduce((initial, k) => {\n            const sub = subs[k];\n            if (!sub) return initial;\n            if (Array.isArray(sub))\n                initial.push(...sub);\n            else\n                initial.push(sub);\n            return initial;\n        }, []);\n    }\n\n    const api = {\n        helper: {\n            tidyFields, props\n        },\n        get config() {\n            return h.options\n        },\n        get options() {\n            return h.options\n        },\n        get form() {\n            return h.form\n        },\n        get rule() {\n            return h.rules\n        },\n        get parent() {\n            return h.vm.$pfc && h.vm.$pfc.$f\n        },\n        get children() {\n            return allSubForm();\n        },\n        formData(fields) {\n            return tidyFields(fields).reduce((initial, id) => {\n                const ctx = h.fieldCtx[id];\n                if (!ctx) return initial;\n                initial[ctx.field] = copy(ctx.rule.value);\n                return initial;\n            }, {});\n        },\n        getValue(field) {\n            const ctx = h.fieldCtx[field];\n            if (!ctx) return;\n            return copy(ctx.rule.value);\n        },\n        coverValue(formData) {\n            h.deferSyncValue(() => {\n                Object.keys(h.fieldCtx).forEach(key => {\n                    const ctx = h.fieldCtx[key];\n                    if (!ctx) return h.appendData[key] = formData[key];\n                    ctx.rule.value = hasProperty(formData, key) ? formData[key] : undefined;\n                });\n            })\n        },\n        setValue(field) {\n            let formData = field;\n            if (arguments.length >= 2)\n                formData = {[field]: arguments[1]};\n            h.deferSyncValue(() => {\n                Object.keys(formData).forEach(key => {\n                    const ctx = h.fieldCtx[key];\n                    if (!ctx) return h.appendData[key] = formData[key];\n                    ctx.rule.value = formData[key];\n                });\n            })\n        },\n        removeField(field) {\n            let ctx = h.getCtx(field);\n            if (!ctx) return;\n            ctx.rm();\n            return ctx.origin;\n        },\n        removeRule(rule) {\n            const ctx = rule && byCtx(rule);\n            if (!ctx) return;\n            ctx.rm();\n            return ctx.origin;\n        },\n        destroy: () => {\n            h.vm.$el.parentNode && h.vm.$el.parentNode.removeChild(h.vm.$el);\n            h.vm.$destroy();\n        },\n        fields: () => h.fields(),\n        append: (rule, after, child) => {\n            let fields = Object.keys(h.fieldCtx), index = h.sort.length - 1, rules;\n\n            if (rule.field && fields.indexOf(rule.field) > -1)\n                return err(`${rule.field} 字段已存在`, rule);\n\n            const ctx = h.getCtx(after);\n\n            if (ctx) {\n                if (child) {\n                    rules = ctx.rule.children;\n                    index = ctx.rule.children.length - 1;\n                } else {\n                    index = ctx.root.indexOf(ctx.origin);\n                    rules = ctx.root;\n                }\n            } else rules = h.rules;\n            rules.splice(index + 1, 0, rule);\n        },\n        prepend: (rule, after, child) => {\n            let fields = Object.keys(h.fieldCtx), index = 0, rules;\n\n            if (rule.field && fields.indexOf(rule.field) > -1)\n                return err(`${rule.field} 字段已存在`, rule);\n\n            const ctx = h.getCtx(after);\n\n            if (ctx) {\n                if (child) {\n                    rules = ctx.rule.children;\n                } else {\n                    index = ctx.root.indexOf(ctx.origin);\n                    rules = ctx.root;\n                }\n            } else rules = h.rules;\n            rules.splice(index, 0, rule);\n        },\n        hidden(state, fields) {\n            props(fields, 'hidden', !!state);\n            h.refresh();\n        },\n        hiddenStatus(id) {\n            const ctx = h.getCtx(id);\n            if (!ctx) return;\n            return !!ctx.rule.hidden;\n        },\n        display(state, fields) {\n            props(fields, 'display', !!state);\n            h.refresh();\n        },\n        displayStatus(id) {\n            const ctx = h.getCtx(id);\n            if (!ctx) return;\n            return !!ctx.rule.display;\n        },\n        disabled(disabled, fields) {\n            tidyFields(fields).forEach((field) => {\n                const ctx = h.fieldCtx[field];\n                if (!ctx) return;\n                $set(ctx.rule.props, 'disabled', !!disabled);\n            });\n            h.refresh();\n        },\n        model(origin) {\n            return byRules(h.fieldCtx, origin);\n        },\n        component(origin) {\n            return byRules(h.nameCtx, origin);\n        },\n        bind() {\n            return api.form;\n        },\n        reload: (rules) => {\n            h.reloadRule(rules)\n        },\n        updateOptions(options) {\n            h.fc.updateOptions(options);\n            api.refresh();\n        },\n        onSubmit(fn) {\n            api.updateOptions({onSubmit: fn});\n        },\n        sync: (field) => {\n            const ctx = is.Object(field) ? byCtx(field) : h.getCtx(field);\n            if (ctx && !ctx.deleted) {\n                const subForm = h.subForm[field];\n                if (subForm) {\n                    if (Array.isArray(subForm)) {\n                        subForm.forEach(form => {\n                            form.refresh();\n                        })\n                    } else if (subForm) {\n                        subForm.refresh();\n                    }\n                }\n                //ctx.updateKey(true);\n                h.$render.clearCache(ctx);\n                h.refresh();\n            }\n        },\n        refresh: () => {\n            allSubForm().forEach(sub => {\n                sub.refresh();\n            });\n            h.$render.clearCacheAll();\n            h.refresh();\n        },\n        refreshOptions() {\n            h.$manager.updateOptions(h.options);\n            api.refresh();\n        },\n        hideForm: (hide) => {\n            $set(h.vm, 'isShow', !hide);\n        },\n        changeStatus: () => {\n            return h.changeStatus;\n        },\n        clearChangeStatus: () => {\n            h.changeStatus = false;\n        },\n        updateRule(id, rule) {\n            const r = api.getRule(id);\n            r && extend(r, rule);\n        },\n        updateRules(rules) {\n            Object.keys(rules).forEach(id => {\n                api.updateRule(id, rules[id]);\n            })\n        },\n        mergeRule: (id, rule) => {\n            const ctx = h.getCtx(id);\n            ctx && mergeRule(ctx.rule, rule);\n        },\n        mergeRules(rules) {\n            Object.keys(rules).forEach(id => {\n                api.mergeRule(id, rules[id]);\n            })\n        },\n        getRule: (id, origin) => {\n            const ctx = h.getCtx(id);\n            if (ctx) {\n                return origin ? ctx.origin : ctx.rule;\n            }\n        },\n        updateValidate(id, validate, merge) {\n            if (merge) {\n                api.mergeRule(id, {validate})\n            } else {\n                props(id, 'validate', validate);\n            }\n        },\n        updateValidates(validates, merge) {\n            Object.keys(validates).forEach(id => {\n                api.updateValidate(id, validates[id], merge);\n            })\n        },\n        refreshValidate() {\n            h.vm.validate = {};\n            api.refresh();\n        },\n        resetFields(fields) {\n            let ctxs = h.fieldCtx;\n            tidyFields(fields).forEach(field => {\n                let ctx = ctxs[field];\n                if (!ctx) return;\n                h.$render.clearCache(ctx);\n                ctx.rule.value = copy(ctx.defaultValue);\n                h.refreshControl(ctx);\n            });\n        },\n        method(id, name) {\n            const el = api.el(id);\n            if (!el || !el[name])\n                throw new Error(format('err', `${name}方法不存在`));\n            return (...args) => {\n                return el[name](...args);\n            }\n        },\n        exec(id, name, ...args) {\n            return invoke(() => api.method(id, name)(...args));\n        },\n        toJson(space) {\n            return toJson(api.rule, space);\n        },\n        trigger(id, event, ...args) {\n            const el = api.el(id);\n            el && el.$emit(event, ...args);\n        },\n        el(id) {\n            const ctx = h.getCtx(id);\n            if (ctx) return ctx.el || h.vm.$refs[ctx.ref];\n        },\n        closeModal: (id) => {\n            const el = api.el(id);\n            el && el.$emit && el.$emit('close-modal');\n        },\n        getSubForm(field) {\n            return h.subForm[field];\n        },\n        nextTick(fn) {\n            h.bus.$once('next-tick', fn);\n            h.refresh();\n        },\n        nextRefresh(fn) {\n            h.nextRefresh();\n            fn && invoke(fn);\n        }\n    };\n\n    ['on', 'once', 'off', 'set'].forEach(n => {\n        api[n] = function (...args) {\n            h.vm[`$${n}`](...args);\n        }\n    });\n\n    api.changeValue = api.changeField = api.setValue;\n\n    return api;\n}\n","import extend from '@form-create/utils/lib/extend';\n\nexport default function useCache(Render) {\n    extend(Render.prototype, {\n        initCache() {\n            this.clearCacheAll();\n        },\n        clearCache(ctx) {\n            if (!this.cache[ctx.id]) {\n                ctx.parent && this.clearCache(ctx.parent);\n                return;\n            }\n            if (this.cache[ctx.id].use === true || this.cache[ctx.id].parent) {\n                this.$handle.refresh();\n            }\n            const parent = this.cache[ctx.id].parent;\n            this.cache[ctx.id] = null;\n            parent && this.clearCache(parent);\n        },\n        clearCacheAll() {\n            this.cache = {};\n        },\n        setCache(ctx, vnode, parent) {\n            this.cache[ctx.id] = {\n                vnode,\n                use: false,\n                parent\n            };\n        },\n        getCache(ctx) {\n            const cache = this.cache[ctx.id];\n            cache.use = true;\n            return cache.vnode;\n        }\n    })\n\n}\n","export default function toCase(str) {\n    const to = str.replace(/(-[a-z])/g, function (v) {\n        return v.replace('-', '').toLocaleUpperCase();\n    });\n\n    return lower(to);\n}\n\nexport function lower(str) {\n    return str.replace(str[0], str[0].toLowerCase());\n}\n","import extend from '@form-create/utils/lib/extend';\nimport mergeProps from '@form-create/utils/lib/mergeprops';\nimport is, {hasProperty} from '@form-create/utils/lib/type';\nimport {_vue as Vue} from '../frame';\nimport {tip} from '@form-create/utils/lib/console';\nimport {invoke, mergeRule} from '../frame/util';\nimport toCase, {lower} from '@form-create/utils/lib/tocase';\nimport {deepSet} from '@form-create/utils';\n\nfunction setTempProps(vm, ctx, api) {\n    if (!vm.$props) return;\n\n    const {prop} = ctx;\n    const keys = Object.keys(vm.$props);\n    const inject = injectProp(ctx, api);\n    const injectKeys = Object.keys(inject);\n\n    keys.forEach(key => {\n        if (hasProperty(prop.props, key))\n            vm.$props[key] = prop.props[key];\n        else if (injectKeys.indexOf(key) > -1) vm.$props[key] = inject[key];\n    });\n\n    const key = (vm.$options.model && vm.$options.model.prop) || 'value';\n    if (keys.indexOf(key) > -1) {\n        vm.$props[key] = prop.value;\n    }\n}\n\nfunction injectProp(ctx, api) {\n    return {\n        formCreate: api,\n        formCreateField: ctx.field,\n        formCreateOptions: ctx.prop.options,\n        formCreateRule: (function () {\n            const temp = {...ctx.prop};\n            return temp.on = temp.on ? {...temp.on} : {}, temp;\n        }()),\n    }\n}\n\n\nexport default function useRender(Render) {\n    extend(Render.prototype, {\n        initRender() {\n            this.renderList = {};\n            this.clearOrgChildren();\n        },\n        initOrgChildren() {\n            const ctxs = this.$handle.ctxs;\n            this.orgChildren = Object.keys(ctxs).reduce((initial, id) => {\n                const children = ctxs[id].rule.children;\n                initial[id] = is.trueArray(children) ? [...children] : [];\n\n                return initial;\n            }, {});\n\n        },\n        clearOrgChildren() {\n            this.orgChildren = {};\n        },\n        render() {\n            if (!this.vm.isShow) {\n                return;\n            }\n            this.$h = this.vm.$createElement;\n            this.$manager.beforeRender();\n\n            const vn = this.sort.map((id) => {\n                return this.renderCtx(this.$handle.ctxs[id]);\n            }).filter((val) => val !== undefined);\n\n            return this.$manager.render(vn);\n        },\n        makeVm(rule) {\n            const vm = rule.vm;\n            if (!vm)\n                return new Vue;\n            else if (is.Function(vm))\n                return invoke(() => vm(this.$handle.getInjectData(rule)));\n            else if (!vm._isVue)\n                return new Vue(vm);\n            return vm;\n        },\n        mergeGlobal(ctx) {\n            const g = this.$handle.options.global;\n            if (!g) return;\n            //todo 缓存配置,更新 option 更新\n            if (!ctx.cacheConfig)\n                ctx.cacheConfig = g[ctx.originType] || g[ctx.type] || g[ctx.trueType] || {};\n            ctx.prop = mergeRule({}, [g['*'], ctx.cacheConfig, ctx.prop]);\n        },\n        setOptions(ctx) {\n            if (ctx.prop.optionsTo && ctx.prop.options) {\n                deepSet(ctx.prop, ctx.prop.optionsTo, ctx.prop.options);\n            }\n        },\n        renderTemp(ctx) {\n            if (!Vue.compile) {\n                tip('当前使用的Vue构建版本不支持compile,无法使用template功能');\n                return [];\n            }\n            const rule = ctx.prop;\n            const {id, key} = ctx;\n\n            if (!this.renderList[id]) {\n                if (!ctx.el) {\n                    ctx.el = this.makeVm(rule);\n                    this.vm.$nextTick(() => ctx.parser.mounted(ctx));\n                }\n\n                let vm = ctx.el;\n                if (ctx.input)\n                    vm.$on((vm.$options.model && vm.$options.model.event) || 'input', (value) => {\n                        this.onInput(ctx, value);\n                    });\n\n                this.renderList[id] = {\n                    vm,\n                    template: Vue.compile(rule.template)\n                };\n            }\n\n            const {vm, template} = this.renderList[id];\n\n            setTempProps(vm, ctx, this.$handle.api);\n\n            const vn = template.render.call(vm);\n\n            if (is.Undef(vn.data)) vn.data = {};\n            vn.key = key;\n            vn.data.ref = ctx.ref;\n            vn.data.key = key;\n            return vn;\n        },\n        renderSides(vn, ctx, temp) {\n            const prop = ctx[temp ? 'rule' : 'prop'];\n            return [this.renderRule(prop.prefix), vn, this.renderRule(prop.suffix)];\n        },\n        renderCtx(ctx, parent) {\n            if (ctx.type === 'hidden') return;\n            if (!this.cache[ctx.id]) {\n                let vn;\n                let cacheFlag = true;\n                const _type = ctx.trueType;\n                const none = !(is.Undef(ctx.rule.display) || !!ctx.rule.display);\n                if (_type === 'template' && !ctx.rule.template) {\n                    vn = this.renderSides(this.renderChildren(ctx), ctx, true);\n                    if (none) {\n                        this.display(vn);\n                    }\n                    vn = this.item(ctx, vn);\n                } else if (_type === 'fcFragment') {\n                    vn = this.renderChildren(ctx);\n                } else {\n                    ctx.initProp();\n                    this.mergeGlobal(ctx);\n                    this.$manager.tidyRule(ctx);\n                    this.setOptions(ctx);\n                    this.ctxProp(ctx);\n                    let prop = ctx.prop;\n\n                    if (prop.hidden) {\n                        this.setCache(ctx, undefined, parent);\n                        return;\n                    }\n\n                    if (_type === 'template' && prop.template) {\n                        vn = this.renderTemp(ctx);\n                        cacheFlag = false;\n                    } else {\n                        vn = ctx.parser.render(this.renderChildren(ctx), ctx);\n                    }\n                    vn = this.renderSides(vn, ctx);\n                    if ((!(!ctx.input && is.Undef(prop.native))) && prop.native !== true) {\n                        vn = this.$manager.makeWrap(ctx, vn);\n                    }\n                    if (none) {\n                        vn = this.display(vn);\n                    }\n                    vn = this.item(ctx, vn)\n                }\n                if (cacheFlag) {\n                    this.setCache(ctx, vn, parent);\n                }\n                return vn;\n            }\n\n            return this.getCache(ctx);\n        },\n        display(vn) {\n            if (Array.isArray(vn)) {\n                const data = [];\n                vn.forEach(v => {\n                    if (Array.isArray(v)) return this.display(v);\n                    if (this.none(v)) data.push(v);\n                })\n                return data;\n            } else {\n                return this.none(vn);\n            }\n        },\n        none(vn) {\n            if (vn && vn.data) {\n                if (Array.isArray(vn.data.style)) {\n                    vn.data.style.push({display: 'none'});\n                } else {\n                    vn.data.style = [vn.data.style, {display: 'none'}];\n                }\n                return vn;\n            }\n        },\n        item(ctx, vn) {\n            return this.$h('fcFragment', {\n                slot: ctx.rule.slot,\n                key: ctx.key,\n            }, [vn]);\n        },\n        ctxProp(ctx, custom) {\n            const {ref, key, rule} = ctx;\n            this.$manager.mergeProp(ctx, custom);\n            ctx.parser.mergeProp(ctx, custom);\n            const props = [\n                {\n                    props: injectProp(ctx, this.$handle.api),\n                    ref: ref,\n                    key: rule.key || `${key}fc`,\n                    slot: undefined,\n                }\n            ]\n\n            if (!custom) {\n                props.push({\n                    on: {\n                        'hook:mounted': () => {\n                            this.onMounted(ctx);\n                        },\n                        'fc.sub-form': (subForm) => {\n                            this.$handle.addSubForm(ctx, subForm);\n                        }\n                    },\n                    model: ctx.input ? {\n                        value: this.$handle.getFormData(ctx),\n                        callback: (value) => {\n                            this.onInput(ctx, value);\n                        },\n                        expression: `formData.${ctx.field}`\n                    } : undefined,\n                })\n            }\n            mergeProps(props, ctx.prop);\n            return ctx.prop;\n        },\n        onMounted(ctx) {\n            ctx.el = this.vm.$refs[ctx.ref];\n            ctx.parser.mounted(ctx);\n            this.$handle.effect(ctx, 'mounted');\n        },\n        onInput(ctx, value) {\n            this.$handle.onInput(ctx, value);\n        },\n        renderChildren(ctx) {\n            const {children} = ctx.rule, orgChildren = this.orgChildren[ctx.id];\n\n            const isRm = child => {\n                return !is.String(child) && child.__fc__ && !this.$handle.ctxs[child.__fc__.id];\n            }\n\n            if (!is.trueArray(children) && orgChildren) {\n                this.$handle.deferSyncValue(() => {\n                    orgChildren.forEach(child => {\n                        if (!child) return;\n                        if (isRm(child)) {\n                            this.$handle.rmCtx(child.__fc__);\n                        }\n                    });\n                });\n                this.orgChildren[ctx.id] = [];\n                return [];\n            }\n\n            orgChildren && this.$handle.deferSyncValue(() => {\n                orgChildren.forEach(child => {\n                    if (!child) return;\n                    if (children.indexOf(child) === -1 && isRm(child)) {\n                        this.$handle.rmCtx(child.__fc__);\n                    }\n                });\n            });\n\n            return children.map(child => {\n                if (!child) return;\n                if (is.String(child)) return child;\n                if (child.__fc__) {\n                    return this.renderCtx(child.__fc__, ctx);\n                }\n                if (!this.$handle.isRepeatRule(child.__origin__ || child) && child.type) {\n                    this.vm.$nextTick(() => {\n                        this.$handle.loadChildren(children, ctx);\n                        this.$handle.refresh();\n                    });\n                }\n            });\n\n        },\n        defaultRender(ctx, children) {\n            const prop = ctx.prop;\n            if (this.vNode[ctx.type])\n                return this.vNode[ctx.type](prop, children);\n            if (this.vNode[ctx.originType])\n                return this.vNode[ctx.originType](prop, children);\n            return this.vNode.make(lower(ctx.originType), prop, children);\n        },\n        renderRule(rule, children, origin) {\n            if (!rule) return undefined;\n            if (is.String(rule)) return rule;\n\n            let type;\n            if (origin) {\n                type = rule.type;\n            } else {\n                type = rule.is;\n                if (rule.type) {\n                    type = toCase(rule.type);\n                    const alias = this.vNode.aliasMap[type];\n                    if (alias) type = toCase(alias);\n                }\n            }\n\n            if (!type) return undefined;\n            let data = [[children]];\n            if (is.trueArray(rule.children)) {\n                data.push(rule.children.map(v => this.renderRule(v)));\n            }\n            return this.$h(type, {...rule}, data);\n        }\n    })\n}\n","import useCache from './cache';\nimport useRender from './render';\nimport extend from '@form-create/utils/lib/extend';\nimport {funcProxy} from '../frame/util';\n\nexport default function Render(handle) {\n    extend(this, {\n        $handle: handle,\n        fc: handle.fc,\n        vm: handle.vm,\n        $manager: handle.$manager,\n        vNode: new handle.fc.CreateNode(handle.vm),\n    });\n\n    funcProxy(this, {\n        options() {\n            return handle.options;\n        },\n        sort() {\n            return handle.sort;\n        }\n    })\n\n    this.initCache();\n    this.initRender();\n}\n\nuseCache(Render);\nuseRender(Render)\n","import extend from '@form-create/utils/lib/extend';\nimport is from '@form-create/utils/lib/type';\nimport toLine from '@form-create/utils/lib/toline';\n\n\nexport default function useInject(Handler) {\n    extend(Handler.prototype, {\n        parseInjectEvent(rule, on) {\n            if (rule.inject === false) return;\n            const inject = rule.inject || this.options.injectEvent;\n            if (is.Undef(inject)) return;\n            Object.keys(on).forEach(k => {\n                if (is.Function(on[k]))\n                    on[k] = this.inject(rule, on[k], inject)\n            });\n            return on;\n        },\n        parseEmit(ctx, on) {\n            let event = {}, rule = ctx.rule, {emitPrefix, field, name, inject} = rule;\n            let emit = rule[on ? 'emit' : 'nativeEmit'] || [];\n            if (is.trueArray(emit)) {\n                let emitKey = emitPrefix || field || name;\n                if (emitKey) {\n                    if (!on) emitKey = `native-${emitKey}`;\n                    emit.forEach(eventName => {\n                        if (!eventName) return;\n                        let eventInject;\n                        if (is.Object(eventName)) {\n                            eventInject = eventName.inject;\n                            eventName = eventName.name;\n                        }\n                        const fieldKey = toLine(`${emitKey}-${eventName}`);\n                        const fn = (...arg) => {\n                            this.vm.$emit(fieldKey, ...arg);\n                            this.vm.$emit('emit-event', fieldKey, ...arg);\n                        };\n                        fn.__emit = true;\n\n                        if (!eventInject && inject === false) {\n                            event[eventName] = fn;\n                        } else {\n                            let _inject = eventInject || inject || this.options.injectEvent;\n                            event[eventName] = is.Undef(_inject) ? fn : this.inject(rule, fn, _inject);\n                        }\n                    });\n                }\n\n            }\n            ctx.computed[on ? 'on' : 'nativeOn'] = event;\n            return event;\n        },\n        getInjectData(self, inject) {\n            const {option, rule} = this.vm.$options.propsData;\n            return {\n                $f: this.api,\n                rule,\n                self: self.__origin__,\n                option,\n                inject\n            };\n        },\n        inject(self, _fn, inject) {\n            if (_fn.__inject) {\n                if (this.watching && !this.loading)\n                    return _fn;\n                _fn = _fn.__origin;\n            }\n\n            const h = this;\n\n            const fn = function (...args) {\n                args.unshift(h.getInjectData(self, inject));\n                return _fn.apply(this, args);\n            };\n            fn.__inject = true;\n            fn.__origin = _fn;\n            return fn;\n        },\n    })\n}\n","import extend from '@form-create/utils/lib/extend';\nimport is from '@form-create/utils/lib/type';\n\nconst EVENT = ['hook:updated', 'hook:mounted'];\n\nexport default function usePage(Handler) {\n    extend(Handler.prototype, {\n        usePage() {\n            const page = this.options.page;\n            if (!page) return;\n            let first = 25;\n            let limit = getLimit(this.rules);\n            if (is.Object(page)) {\n                if (page.first) first = parseInt(page.first, 10) || first;\n                if (page.limit) limit = parseInt(page.limit, 10) || limit;\n            }\n            extend(this, {\n                first,\n                limit,\n                pageEnd: this.rules.length <= first,\n            })\n\n            this.bus.$on('page-end', () => this.vm.$emit('page-end', this.api));\n            this.pageLoad();\n        },\n        pageLoad() {\n            const pageFn = () => {\n                if (this.pageEnd) {\n                    this.vm.$off(EVENT, pageFn);\n                    this.bus.$emit('page-end');\n                } else {\n                    this.first += this.limit;\n                    this.pageEnd = this.rules.length <= this.first;\n                    this.loadRule();\n                    this.refresh();\n                }\n            }\n            this.vm.$on(EVENT, pageFn);\n        },\n    })\n}\n\n\nfunction getLimit(rules) {\n    return rules.length < 31 ? 31 : Math.ceil(rules.length / 3);\n}\n","import extend from '@form-create/utils/lib/extend';\n\n\nexport default function useRender(Handler) {\n    extend(Handler.prototype, {\n        clearNextTick() {\n            this.nextTick && clearTimeout(this.nextTick);\n            this.nextTick = null;\n        },\n        bindNextTick(fn) {\n            this.clearNextTick();\n            this.nextTick = setTimeout(() => {\n                fn()\n                this.nextTick = null;\n            }, 10);\n        },\n        render() {\n            // console.warn('%c render', 'color:green');\n            ++this.loadedId;\n\n            if (this.vm.unique > 0)\n                return this.$render.render();\n            else {\n                this.vm.unique = 1;\n                return [];\n            }\n        },\n    });\n}\n","import unique from '@form-create/utils/lib/unique';\nimport toCase from '@form-create/utils/lib/tocase';\nimport extend from '@form-create/utils/lib/extend';\nimport mergeProps from '@form-create/utils/lib/mergeprops';\nimport {enumerable} from '../frame/util';\nimport {deepCopy} from '@form-create/utils/lib/deepextend';\n\nfunction bind(ctx) {\n    Object.defineProperties(ctx.origin, {\n        __fc__: enumerable(ctx, true)\n    });\n}\n\nexport default function RuleContext(handle, rule) {\n    const id = unique();\n\n    extend(this, {\n        id,\n        ref: id,\n        wrapRef: id + 'fi',\n        rule,\n        origin: rule.__origin__ || rule,\n        name: rule.name,\n\n        watch: [],\n        linkOn: [],\n        root: [],\n        ctrlRule: [],\n        parent: null,\n        cacheConfig: null,\n        prop: {...rule},\n        computed: {},\n        payload: {},\n        input: !!rule.field,\n        el: undefined,\n        defaultValue: rule.field ? deepCopy(rule.value) : undefined,\n        field: rule.field || undefined,\n    })\n\n    this.updateType();\n    this.updateKey();\n    bind(this);\n    this.update(handle, true);\n}\n\nextend(RuleContext.prototype, {\n    effectData(name) {\n        if (!this.payload[name]) {\n            this.payload[name] = {};\n        }\n        return this.payload[name];\n    },\n    clearEffectData(name) {\n        delete this.payload[name]\n    },\n    updateKey(flag) {\n        this.key = unique();\n        flag && this.parent && this.parent.updateKey(flag);\n    },\n    updateType() {\n        this.originType = this.rule.type;\n        this.type = toCase(this.rule.type);\n    },\n    setParser(parser) {\n        this.parser = parser;\n        parser.init(this);\n    },\n    initProp() {\n        this.prop = mergeProps([this.rule, ...Object.keys(this.payload).map(k => this.payload[k]), this.computed]);\n    },\n    check(handle) {\n        return this.vm === handle.vm\n    },\n    unwatch() {\n        this.watch.forEach(un => un());\n        this.watch = [];\n    },\n    unlink() {\n        this.linkOn.forEach(un => un());\n        this.linkOn = [];\n    },\n    link() {\n        this.unlink();\n        this.$handle.appendLink(this);\n    },\n    watchTo() {\n        this.$handle.watchCtx(this);\n    },\n    delete() {\n        const undef = void 0;\n        this.unwatch();\n        this.unlink();\n        this.rmCtrl();\n        extend(this, {\n            deleted: true,\n            prop: {...this.rule},\n            computed: {},\n            el: undef,\n            $handle: undef,\n            $render: undef,\n            $api: undef,\n            vm: undef,\n            vNode: undef,\n            parent: null,\n            cacheConfig: null,\n        })\n    },\n    rmCtrl() {\n        this.ctrlRule.forEach(ctrl => ctrl.__fc__.rm());\n        this.ctrlRule = [];\n    },\n    rm() {\n        const _rm = () => {\n            let index = this.root.indexOf(this.origin);\n            if (index > -1) {\n                this.root.splice(index, 1);\n                this.$handle.refresh();\n            }\n        }\n        if (this.deleted) {\n            _rm();\n            return;\n        }\n        this.$handle.noWatch(() => {\n            this.$handle.deferSyncValue(() => {\n                this.rmCtrl();\n                _rm();\n                this.$handle.rmCtx(this);\n                extend(this, {\n                    root: []\n                });\n            });\n        });\n    },\n    update(handle, init) {\n        extend(this, {\n            deleted: false,\n            $handle: handle,\n            $render: handle.$render,\n            $api: handle.api,\n            vm: handle.vm,\n            trueType: handle.getType(this.originType),\n            vNode: handle.$render.vNode,\n            updated: false,\n        });\n        !init && this.unwatch();\n        this.watchTo();\n        this.link();\n    }\n})\n","import extend from '@form-create/utils/lib/extend';\nimport {byCtx, copyRule, enumerable, getRule, invoke, parseFn} from '../frame/util';\nimport is, {hasProperty} from '@form-create/utils/lib/type';\nimport {err} from '@form-create/utils/lib/console';\nimport {baseRule} from '../factory/creator';\nimport RuleContext from '../factory/context';\nimport mergeProps from '@form-create/utils/lib/mergeprops';\n\nexport default function useLoader(Handler) {\n    extend(Handler.prototype, {\n        nextRefresh(fn) {\n            const id = this.loadedId;\n            this.vm.$nextTick(() => {\n                id === this.loadedId && (fn ? fn() : this.refresh());\n            });\n        },\n        parseRule(_rule) {\n            const rule = getRule(_rule);\n\n            Object.defineProperties(rule, {\n                __origin__: enumerable(_rule, true)\n            });\n\n            fullRule(rule);\n\n            if (rule.field && hasProperty(this.options.formData || {}, rule.field))\n                rule.value = this.options.formData[rule.field];\n\n            rule.options = Array.isArray(rule.options) ? rule.options : [];\n\n            ['on', 'props', 'nativeOn'].forEach(k => {\n                const v = rule[k];\n                if (v) {\n                    Object.keys(v).forEach(n => {\n                        v[n] = parseFn(v[n]);\n                    })\n                    this.parseInjectEvent(rule, v);\n                }\n            })\n\n            return rule;\n        },\n        syncProp(ctx) {\n            const rule = ctx.rule;\n            is.trueArray(rule.sync) && mergeProps([{\n                on: rule.sync.reduce((pre, prop) => {\n                    pre[`update:${prop}`] = (val) => {\n                        rule.props[prop] = val;\n                        this.vm.$emit('sync', prop, val, rule, this.fapi);\n                    }\n                    return pre\n                }, {})\n            }], ctx.computed)\n        },\n        isRepeatRule(rule) {\n            return this.repeatRule.indexOf(rule) > -1;\n        },\n        loadRule() {\n            // console.warn('%c load', 'color:blue');\n            this.cycleLoad = false;\n            this.loading = true;\n            if (this.pageEnd) {\n                this.bus.$emit('load-start');\n            }\n            this.deferSyncValue(() => {\n                this._loadRule(this.rules);\n                this.loading = false;\n                if (this.cycleLoad && this.pageEnd) {\n                    return this.loadRule();\n                }\n                if (this.pageEnd) {\n                    this.bus.$emit('load-end');\n                }\n                this.vm._renderRule();\n                this.$render.initOrgChildren();\n                this.syncForm();\n            });\n        },\n        loadChildren(children, parent) {\n            this.cycleLoad = false;\n            this.loading = true;\n            this.bus.$emit('load-start');\n            this._loadRule(children, parent);\n            this.loading = false;\n            if (this.cycleLoad) {\n                return this.loadRule();\n            } else {\n                this.bus.$emit('load-end');\n                this.syncForm();\n            }\n            this.$render.clearCache(parent);\n        },\n        _loadRule(rules, parent) {\n\n            const preIndex = (i) => {\n                let pre = rules[i - 1];\n                if (!pre || !pre.__fc__) {\n                    return i > 0 ? preIndex(i - 1) : -1;\n                }\n                let index = this.sort.indexOf(pre.__fc__.id);\n                return index > -1 ? index : preIndex(i - 1);\n            }\n\n            const loadChildren = (children, parent) => {\n                if (is.trueArray(children)) {\n                    this._loadRule(children, parent);\n                }\n            };\n\n            const initEvent = (rule) => this.ruleEffect(rule, 'init');\n\n            rules.map((_rule, index) => {\n                if (parent && (is.String(_rule) || is.Undef(_rule))) return;\n                if (!this.pageEnd && !parent && index >= this.first) return;\n\n                if (!is.Object(_rule) || !getRule(_rule).type)\n                    return err('未定义生成规则的 type 字段', _rule);\n\n                if (_rule.__fc__ && _rule.__fc__.root === rules && this.ctxs[_rule.__fc__.id]) {\n                    loadChildren(_rule.__fc__.rule.children, _rule.__fc__);\n                    return _rule.__fc__;\n                }\n\n                let rule = getRule(_rule);\n\n                if (!_rule.__fc__) initEvent(rule);\n\n                if (rule.field && this.fieldCtx[rule.field] && this.fieldCtx[rule.field] !== _rule.__fc__) {\n                    this.repeatRule.push(_rule);\n                    return err(`${rule.field} 字段已存在`, _rule);\n                }\n\n                let ctx;\n                if (_rule.__fc__) {\n                    ctx = _rule.__fc__;\n                    const check = !ctx.check(this);\n                    if (ctx.deleted) {\n                        if (check) {\n                            if (isCtrl(ctx)) {\n                                return;\n                            }\n                            ctx.update(this);\n                        }\n                    } else {\n                        if (check) {\n                            if (isCtrl(ctx)) {\n                                return;\n                            }\n                            rules[index] = _rule = _rule._clone ? _rule._clone() : copyRule(_rule);\n                            initEvent(getRule(_rule));\n                            ctx = null;\n                        }\n                    }\n                }\n                if (!ctx) {\n                    ctx = new RuleContext(this, this.parseRule(_rule));\n                    this.bindParser(ctx);\n                } else if (ctx.originType !== ctx.rule.type) {\n                    ctx.updateType();\n                    this.bindParser(ctx);\n                }\n                this.appendValue(ctx.rule);\n                [false, true].forEach(b => this.parseEmit(ctx, b));\n                this.syncProp(ctx);\n                ctx.parent = parent || null;\n                ctx.root = rules;\n                this.setCtx(ctx);\n\n                loadChildren(ctx.rule.children, ctx);\n\n                if (!parent) {\n                    const _preIndex = preIndex(index);\n                    if (_preIndex > -1 || !index) {\n                        this.sort.splice(_preIndex + 1, 0, ctx.id);\n                    } else {\n                        this.sort.push(ctx.id);\n                    }\n                }\n\n                const r = ctx.rule;\n                if (!ctx.updated) {\n                    ctx.updated = true;\n                    if (is.Function(r.update)) {\n                        this.bus.$once('load-end', () => {\n                            this.refreshUpdate(ctx, r.value);\n                        });\n                    }\n                    this.effect(ctx, 'loaded');\n                }\n\n                if (ctx.input)\n                    Object.defineProperty(r, 'value', this.valueHandle(ctx));\n                if (this.refreshControl(ctx)) this.cycleLoad = true;\n                return ctx;\n            });\n        },\n        refreshControl(ctx) {\n            return ctx.input && ctx.rule.control && this.useCtrl(ctx);\n        },\n        useCtrl(ctx) {\n            const controls = getCtrl(ctx), validate = [], api = this.api;\n            if (!controls.length) return false;\n\n            for (let i = 0; i < controls.length; i++) {\n                const control = controls[i], handleFn = control.handle || (val => val === control.value);\n                const data = {\n                    ...control,\n                    valid: invoke(() => handleFn(ctx.rule.value, api)),\n                    ctrl: findCtrl(ctx, control.rule),\n                };\n                if ((data.valid && data.ctrl) || (!data.valid && !data.ctrl)) continue;\n                validate.push(data);\n            }\n            if (!validate.length) return false;\n\n            let flag = false;\n            validate.reverse().forEach(({valid, rule, prepend, append, child, ctrl}) => {\n                if (valid) {\n                    flag = true;\n                    const ruleCon = {\n                        type: 'fcFragment',\n                        native: true,\n                        __ctrl: true,\n                        children: rule,\n                    }\n                    ctx.ctrlRule.push(ruleCon);\n                    this.bus.$once('load-start', () => {\n                        // this.cycleLoad = true;\n                        if (prepend) {\n                            api.prepend(ruleCon, prepend, child)\n                        } else if (append || child) {\n                            api.append(ruleCon, append || ctx.id, child)\n                        } else {\n                            ctx.root.splice(ctx.root.indexOf(ctx.origin) + 1, 0, ruleCon);\n                        }\n                    });\n                } else {\n                    ctx.ctrlRule.splice(ctx.ctrlRule.indexOf(ctrl), 1);\n                    const ctrlCtx = byCtx(ctrl);\n                    ctrlCtx && ctrlCtx.rm();\n                }\n            });\n            this.vm.$emit('control', ctx.origin, this.api);\n            this.effect(ctx, 'control');\n            return flag;\n        },\n        reloadRule(rules) {\n            return this._reloadRule(rules);\n        },\n        _reloadRule(rules) {\n            // console.warn('%c reload', 'color:red');\n            if (!rules) rules = this.rules;\n\n            const ctxs = {...this.ctxs};\n\n            this.clearNextTick();\n            this.$render.clearOrgChildren();\n            this.initData(rules);\n            this.fc.rules = rules;\n\n            this.bus.$once('load-end', () => {\n                Object.keys(ctxs).filter(id => this.ctxs[id] === undefined)\n                    .forEach(id => this.rmCtx(ctxs[id]));\n                this.$render.clearCacheAll();\n            });\n            this.reloading = true;\n            this.loadRule();\n            this.reloading = false;\n            this.refresh();\n\n            this.bus.$off('next-tick', this.nextReload);\n            this.bus.$once('next-tick', this.nextReload);\n        },\n        //todo 组件生成全部通过 alias\n        refresh() {\n            this.vm._refresh();\n        },\n    });\n}\n\nfunction fullRule(rule) {\n    const def = baseRule();\n\n    Object.keys(def).forEach(k => {\n        if (!hasProperty(rule, k)) rule[k] = def[k];\n    });\n    return rule;\n}\n\nfunction getCtrl(ctx) {\n    const control = ctx.rule.control || [];\n    if (is.Object(control)) return [control];\n    else return control;\n}\n\nfunction findCtrl(ctx, rule) {\n    for (let i = 0; i < ctx.ctrlRule.length; i++) {\n        const ctrl = ctx.ctrlRule[i];\n        if (ctrl.children === rule)\n            return ctrl;\n    }\n}\n\nfunction isCtrl(ctx) {\n    return !!ctx.rule.__ctrl;\n}\n","import extend from '@form-create/utils/lib/extend';\nimport {$set} from '@form-create/utils/lib';\nimport is, {hasProperty} from '@form-create/utils/lib/type';\nimport {invoke} from '../frame/util';\nimport toArray from '@form-create/utils/lib/toarray';\n\nexport default function useInput(Handler) {\n    extend(Handler.prototype, {\n        getValue(ctx) {\n            if (!hasProperty(ctx, 'cacheValue')) {\n                ctx.cacheValue = ctx.parser.toValue(this.getFormData(ctx), ctx);\n            }\n            return ctx.cacheValue;\n        },\n        setValue(ctx, value, formValue, setFlag) {\n            if (ctx.deleted) return;\n            ctx.cacheValue = value;\n            this.changeStatus = true;\n            this.nextRefresh();\n            this.$render.clearCache(ctx);\n            this.setFormData(ctx, formValue);\n            this.syncValue();\n            this.valueChange(ctx, value);\n            this.vm.$emit('change', ctx.field, value, ctx.origin, this.api, setFlag);\n            this.effect(ctx, 'value');\n        },\n        onInput(ctx, value) {\n            let val;\n            if (ctx.input && (this.isQuote(ctx, val = ctx.parser.toValue(value, ctx)) || this.isChange(ctx, val))) {\n                this.setValue(ctx, val, value);\n            }\n        },\n        setFormData(ctx, value) {\n            $set(this.formData, ctx.field, value);\n        },\n        getFormData(ctx) {\n            return this.formData[ctx.field];\n        },\n        validate() {\n            toEmpty(this.vm.validate);\n            Object.keys(this.fieldCtx).forEach(id => {\n                const ctx = this.fieldCtx[id];\n                this.vm.validate[ctx.field] = toArray(ctx.rule.validate);\n            });\n            return this.vm.validate;\n        },\n        syncForm() {\n            toEmpty(this.form);\n            Object.defineProperties(this.form, Object.keys(this.formData).reduce((initial, field) => {\n                const ctx = this.getCtx(field);\n                const handle = this.valueHandle(ctx);\n                handle.configurable = true;\n                initial[field] = handle;\n                return initial;\n            }, {}));\n            this.syncValue();\n        },\n        valueHandle(ctx) {\n            return {\n                enumerable: true,\n                get: () => {\n                    return this.getValue(ctx);\n                },\n                set: (value) => {\n                    if (this.isChange(ctx, value)) {\n                        this.setValue(ctx, value, ctx.parser.toFormValue(value, ctx), true);\n                    }\n                }\n            };\n        },\n        appendValue(rule) {\n            if (!rule.field || !hasProperty(this.appendData, rule.field)) return;\n            rule.value = this.appendData[rule.field];\n            delete this.appendData[rule.field];\n        },\n        addSubForm(ctx, subForm) {\n            this.subForm[ctx.field] = subForm;\n        },\n        deferSyncValue(fn) {\n            if (!this.deferSyncFn) {\n                this.deferSyncFn = fn;\n            }\n            invoke(fn);\n            if (this.deferSyncFn === fn) {\n                this.deferSyncFn = null;\n                if (fn.sync) {\n                    this.syncValue();\n                }\n            }\n        },\n        syncValue() {\n            if (this.deferSyncFn) {\n                return this.deferSyncFn.sync = true;\n            }\n            this.vm._updateValue({...this.form});\n        },\n        isChange(ctx, value) {\n            return JSON.stringify(ctx.rule.value) !== JSON.stringify(value);\n        },\n        isQuote(ctx, value) {\n            return (is.Object(value) || Array.isArray(value)) && value === ctx.rule.value;\n        },\n        refreshUpdate(ctx, val) {\n            const fn = ctx.rule.update;\n            if (is.Function(fn)) {\n                const state = invoke(() => fn(val, ctx.origin, this.api));\n                if (state === undefined) return;\n                ctx.rule.hidden = state === true;\n            }\n        },\n        valueChange(ctx, val) {\n            this.refreshRule(ctx, val);\n            this.bus.$emit('change-' + ctx.field, val);\n        },\n        refreshRule(ctx, val) {\n            if (this.refreshControl(ctx)) {\n                this.$render.clearCacheAll();\n                this.loadRule();\n                this.refresh();\n            }\n            this.refreshUpdate(ctx, val);\n        },\n        appendLink(ctx) {\n            const link = ctx.rule.link;\n            is.trueArray(link) && link.forEach(field => {\n                const fn = () => this.refreshRule(ctx, ctx.rule.value);\n\n                this.bus.$on('change-' + field, fn);\n                ctx.linkOn.push(() => this.bus.$off('change-' + field, fn));\n            });\n        },\n        fields() {\n            return Object.keys(this.formData);\n        },\n    });\n}\n\nfunction toEmpty(obj) {\n    Object.keys(obj).forEach(k => delete obj[k]);\n}","import {enumerable, getRule} from '../frame/util';\nimport is from '@form-create/utils/lib/type';\n\n\nexport default function useHelper(rules) {\n    if (!Array.isArray(rules) || rules.findField) return;\n    Object.defineProperties(rules, {\n        findField: enumerable(findField),\n        findName: enumerable(findName),\n        setValue: enumerable(setValue),\n    })\n}\n\nfunction find(field, name, origin) {\n    if (!this.length) return;\n    let children = [];\n    for (let i = 0; i < this.length; i++) {\n        if (!is.Object(this[i])) continue;\n        let rule = getRule(this[i]);\n        if (rule[name] === field) return origin ? rule : this[i];\n        if (is.trueArray(rule.children)) children = children.concat(rule.children);\n        is.trueArray(rule.control) && rule.control.forEach(r => {\n            children = children.concat(r.rule);\n        })\n    }\n    return find.call(children, field, name, origin);\n}\n\nfunction findField(field) {\n    return find.call(this, field, 'field');\n}\n\nfunction findName(field) {\n    return find.call(this, field, 'name');\n}\n\nfunction setValue(formData) {\n    Object.keys(formData).forEach(field => {\n        const rule = find.call(this, field, 'field', true);\n        if (rule) rule.value = formData[field];\n    });\n}\n","const BaseParser = {\n    init(ctx) {\n    },\n    toFormValue(value, ctx) {\n        return value\n    },\n    toValue(formValue, ctx) {\n        return formValue;\n    },\n    mounted(ctx) {\n    },\n    render(children, ctx) {\n        return ctx.$render.defaultRender(ctx, children);\n    },\n    mergeProp(ctx) {\n    }\n}\n\nexport default BaseParser;\n","import extend from '@form-create/utils/lib/extend';\nimport toCase from '@form-create/utils/lib/tocase';\nimport BaseParser from '../factory/parser';\nimport {$del, $set} from '@form-create/utils/lib';\nimport is from '@form-create/utils/lib/type';\nimport {invoke} from '../frame/util';\n\n\nexport default function useContext(Handler) {\n    extend(Handler.prototype, {\n        getCtx(id) {\n            return this.fieldCtx[id] || this.nameCtx[id] || this.ctxs[id];\n        },\n        setCtx(ctx) {\n            let {id, field, name, rule} = ctx;\n            this.ctxs[id] = ctx;\n            if (name) $set(this.nameCtx, name, ctx);\n            if (!ctx.input) return;\n            this.fieldCtx[field] = ctx;\n            this.setFormData(ctx, ctx.parser.toFormValue(rule.value, ctx));\n            if (this.isMounted && !this.reloading) {\n                this.vm.$emit('change', ctx.field, rule.value, ctx.origin, this.api);\n            }\n        },\n        getParser(ctx) {\n            const list = this.fc.parsers;\n            return list[ctx.originType] || list[toCase(ctx.type)] || list[ctx.trueType] || BaseParser;\n        },\n        bindParser(ctx) {\n            ctx.setParser(this.getParser(ctx));\n        },\n        getType(alias) {\n            const map = this.fc.CreateNode.aliasMap;\n            const type = map[alias] || map[toCase(alias)] || alias;\n            return toCase(type);\n        },\n        noWatch(fn) {\n            if (!this.noWatchFn) {\n                this.noWatchFn = fn;\n            }\n            invoke(fn);\n            if (this.noWatchFn === fn) {\n                this.noWatchFn = null;\n            }\n        },\n        watchCtx(ctx) {\n            const vm = this.vm;\n            const none = ['field', 'value', 'vm', 'template', 'name', 'config', 'control', 'inject', 'sync', 'payload', 'optionsTo'];\n            Object.keys(ctx.rule).filter(k => none.indexOf(k) === -1).forEach((key) => {\n                const flag = key === 'children';\n                ctx.watch.push(vm.$watch(() => ctx.rule[key], (n, o) => {\n                    if (this.loading || this.noWatchFn || this.reloading) return;\n                    this.watching = true;\n                    // if (key === 'hidden')\n                    //     ctx.updateKey(true);\n                    // else\n                    if (key === 'link') {\n                        ctx.link();\n                        return;\n                    } else if (['props', 'on', 'nativeOn'].indexOf(key) > -1) {\n                        this.parseInjectEvent(ctx.rule, n || {});\n                        if (key === 'props' && ctx.input) {\n                            this.setFormData(ctx, ctx.parser.toFormValue(ctx.rule.value, ctx));\n                        }\n                    } else if (['emit', 'nativeEmit'].indexOf(key) > -1)\n                        this.parseEmit(ctx, key === 'emit');\n                    else if (key === 'type') {\n                        ctx.updateType();\n                        this.bindParser(ctx);\n                    } else if (key === 'children') {\n                        const flag = is.trueArray(n);\n                        this.deferSyncValue(() => {\n                            if (n !== o) {\n                                this.rmSub(o);\n                                this.$render.initOrgChildren();\n                            }\n                            flag && this.loadChildren(n, ctx);\n                        });\n                    }\n                    this.$render.clearCache(ctx);\n                    this.watching = false;\n                }, {deep: !flag, sync: flag}));\n            });\n            this.watchEffect(ctx);\n        },\n        rmSub(sub) {\n            is.trueArray(sub) && sub.forEach(r => {\n                r && r.__fc__ && this.rmCtx(r.__fc__);\n            })\n        },\n        rmCtx(ctx) {\n            if (ctx.deleted) return;\n            const {id, field, name} = ctx;\n            if (ctx.input) {\n                Object.defineProperty(ctx.rule, 'value', {\n                    value: ctx.rule.value,\n                    writable: true\n                });\n            }\n\n            $del(this.ctxs, id);\n            $del(this.$render.renderList, id);\n            $del(this.$render.orgChildren, id);\n            $del(ctx, 'cacheValue');\n\n            const f = this.fieldCtx[field];\n\n            if (field && (!f || f === ctx)) {\n                $del(this.formData, field);\n                $del(this.form, field);\n                $del(this.fieldCtx, field);\n                $del(this.subForm, field);\n                this.vm.$nextTick(() => this.vm.$emit('removeField', field, ctx.rule, this.api));\n            }\n            if (name && this.nameCtx[name] === ctx) {\n                $del(this.nameCtx, name);\n            }\n            if (!this.reloading) {\n                this.deferSyncValue(() => {\n                    if (is.trueArray(ctx.rule.children)) {\n                        ctx.rule.children.forEach(h => h.__fc__ && this.rmCtx(h.__fc__));\n                    }\n                    this.syncValue();\n                })\n                if (ctx.root === this.rules) {\n                    this.vm._renderRule();\n                }\n            }\n\n            const index = this.sort.indexOf(id);\n            if (index > -1) {\n                this.sort.splice(index, 1);\n            }\n\n            this.$render.clearCache(ctx);\n            ctx.delete();\n            this.effect(ctx, 'deleted');\n            this.vm.$nextTick(() => this.vm.$emit('removeRule', ctx.rule, this.api));\n            return ctx;\n        },\n    })\n}\n","import extend from '@form-create/utils/lib/extend';\nimport is from '@form-create/utils/lib/type';\nimport {invoke} from '../frame/util';\n\n\nexport default function useLifecycle(Handler) {\n    extend(Handler.prototype, {\n        mounted() {\n            const _mounted = () => {\n                this.isMounted = true;\n                this.lifecycle('mounted');\n            }\n            if (this.pageEnd) {\n                _mounted();\n            } else {\n                this.bus.$once('page-end', _mounted);\n            }\n        },\n        lifecycle(name) {\n            const fn = this.options[name];\n            is.Function(fn) && invoke(() => fn(this.api));\n            this.vm.$emit(name, this.api);\n        },\n    })\n}\n","import extend from '@form-create/utils/lib/extend';\nimport is, {hasProperty} from '@form-create/utils/lib/type';\nimport mergeProps from '@form-create/utils/lib/mergeprops';\n\n\nexport default function useEffect(Handler) {\n    extend(Handler.prototype, {\n        useProvider() {\n            const ps = this.fc.providers;\n            Object.keys(ps).forEach(k => {\n                const prop = ps[k];\n                prop._c = getComponent(prop);\n                this.onEffect(prop);\n                this.providers[k] = prop;\n            });\n        },\n        onEffect(provider) {\n            const used = [];\n            (provider._c || ['*']).forEach(name => {\n                const type = name === '*' ? '*' : this.getType(name);\n                if (used.indexOf(type) > -1) return;\n                used.push(type);\n                this.bus.$on(`p:${provider.name}:${type}:${provider.input ? 1 : 0}`, (event, args) => {\n                    provider[event] && provider[event](...args);\n                });\n            });\n            provider._used = used;\n        },\n        watchEffect(ctx) {\n            const vm = this.vm;\n            Object.keys(ctx.rule.effect || {}).forEach(k => {\n                ctx.watch.push(vm.$watch(() => ctx.rule.effect[k], (n) => {\n                    this.effect(ctx, 'watch', {[k]: n});\n                }, {deep: true}));\n            });\n        },\n        effect(ctx, event, custom) {\n            this.emitEffect({\n                rule: ctx.rule,\n                input: ctx.input,\n                type: ctx.trueType,\n                ctx,\n                custom\n            }, event);\n        },\n        ruleEffect(rule, event) {\n            this.emitEffect({\n                rule,\n                input: !!rule.field,\n                type: this.getType(rule.type)\n            }, event);\n        },\n        getEffect(rule, name) {\n            if (hasProperty(rule, 'effect') && hasProperty(rule.effect, name))\n                return rule.effect[name];\n            else\n                return undefined;\n        },\n        emitEffect({ctx, rule, input, type, custom}, event) {\n            if (!type || type === 'fcFragment') return;\n            const effect = custom ? custom : (rule.effect || {});\n            Object.keys(effect).forEach(attr => {\n                const p = this.providers[attr];\n                if (!p || (p.input && !input)) return;\n                let _type;\n                if (!p._c) {\n                    _type = '*';\n                } else if (p._used.indexOf(type) > -1) {\n                    _type = type;\n                } else {\n                    return;\n                }\n                const data = {value: effect[attr], getValue: () => this.getEffect(rule, attr)};\n                if (ctx) {\n                    data.getProp = () => ctx.effectData(attr);\n                    data.clearProp = () => ctx.clearEffectData(attr);\n                    data.mergeProp = (prop) => mergeProps([prop], data.getProp());\n                }\n                this.bus.$emit(`p:${attr}:${_type}:${p.input ? 1 : 0}`, event, [data, rule, this.api]);\n            });\n        }\n    });\n}\n\nfunction unique(arr) {\n    return arr.filter(function (item, index, arr) {\n        return arr.indexOf(item, 0) === index;\n    });\n}\n\nfunction getComponent(p) {\n    const c = p.components;\n    if (Array.isArray(c)) return unique(c.filter(v => v !== '*'));\n    else if (is.String(c)) return [c];\n    else return false;\n}\n","import Api from '../frame/api';\nimport Render from '../render';\nimport extend from '@form-create/utils/lib/extend';\nimport {funcProxy} from '../frame/util';\nimport useInject from './inject';\nimport usePage from './page';\nimport useRender from './render';\nimport useLoader from './loader';\nimport useInput from './input';\nimport useHelper from './helper';\nimport useContext from './context';\nimport useLifecycle from './lifecycle';\nimport useEffect from './effect';\n\n\nexport default function Handler(fc) {\n    extend(this, {\n        fc,\n        vm: fc.vm,\n        watching: false,\n        loading: false,\n        reloading: false,\n        noWatchFn: null,\n        deferSyncFn: null,\n        isMounted: false,\n        formData: {},\n        subForm: {},\n        form: {},\n        appendData: {},\n        providers: {},\n        cycleLoad: null,\n        loadedId: 1,\n        nextTick: null,\n        changeStatus: false,\n        pageEnd: true,\n        nextReload: () => {\n            this.lifecycle('reload');\n        }\n    });\n\n    funcProxy(this, {\n        options() {\n            return fc.options;\n        },\n        bus() {\n            return fc.bus;\n        },\n    })\n\n    this.initData(fc.rules);\n\n    this.$manager = new fc.manager(this);\n    this.$render = new Render(this);\n    this.api = fc.extendApi(Api(this), this);\n}\n\nextend(Handler.prototype, {\n    initData(rules) {\n        extend(this, {\n            fieldCtx: {},\n            ctxs: {},\n            nameCtx: {},\n            sort: [],\n            rules,\n            repeatRule: [],\n        });\n        useHelper(rules);\n    },\n    init() {\n        this.useProvider();\n        this.usePage();\n        this.loadRule();\n        this.$manager.__init();\n        this.vm.$set(this.vm, 'formData', this.formData);\n    },\n})\n\nuseInject(Handler);\nusePage(Handler);\nuseRender(Handler);\nuseLoader(Handler);\nuseInput(Handler);\nuseContext(Handler);\nuseLifecycle(Handler);\nuseEffect(Handler);\n","// https://github.com/ElemeFE/element/blob/dev/packages/upload/src/ajax.js\n\nfunction getError(action, option, xhr) {\n    const msg = `fail to ${action} ${xhr.status}'`;\n    const err = new Error(msg);\n    err.status = xhr.status;\n    err.url = action;\n    return err;\n}\n\nfunction getBody(xhr) {\n    const text = xhr.responseText || xhr.response;\n    if (!text) {\n        return text;\n    }\n\n    try {\n        return JSON.parse(text);\n    } catch (e) {\n        return text;\n    }\n}\n\nexport default function fetch(option) {\n    if (typeof XMLHttpRequest === 'undefined') {\n        return;\n    }\n\n    const xhr = new XMLHttpRequest();\n    const action = option.action;\n\n    xhr.onerror = function error(e) {\n        option.onError(e);\n    };\n\n    xhr.onload = function onload() {\n        if (xhr.status < 200 || xhr.status >= 300) {\n            return option.onError(getError(action, option, xhr), getBody(xhr));\n        }\n\n        option.onSuccess(getBody(xhr));\n    };\n\n    xhr.open(option.method || 'get', action, true);\n\n    let formData;\n    if (option.data) {\n        if ((option.dataType || '').toLowerCase() !== 'json') {\n            formData = new FormData();\n            Object.keys(option.data).map(key => {\n                formData.append(key, option.data[key]);\n            });\n        } else {\n            formData = JSON.stringify(option.data);\n            xhr.setRequestHeader('content-type', 'application/json');\n        }\n    }\n\n\n    if (option.withCredentials && 'withCredentials' in xhr) {\n        xhr.withCredentials = true;\n    }\n\n    const headers = option.headers || {};\n\n    Object.keys(headers).forEach(item => {\n        if (headers[item] !== null) {\n            xhr.setRequestHeader(item, headers[item]);\n        }\n    });\n    xhr.send(formData);\n}\n","const NAME = 'fcFragment';\n\nexport default {\n    name: NAME,\n    functional: true,\n    render(h, ctx) {\n        return ctx.children\n    }\n}\n","import toLine from '@form-create/utils/lib/toline';\nimport is from '@form-create/utils/lib/type';\nimport toString from '@form-create/utils/lib/tostring';\nimport extend from '@form-create/utils/lib/extend';\nimport Vue from 'vue';\n\nfunction parseProp(prop) {\n    if (is.String(prop))\n        return {domProps: {innerHTML: prop}};\n    return prop;\n}\n\nexport function CreateNodeFactory() {\n\n    const aliasMap = {};\n\n    function CreateNode(vm) {\n        vm && this.setVm(vm);\n    }\n\n    extend(CreateNode.prototype, {\n        setVm(vm) {\n            this.vm = vm;\n            this.$h = vm.$createElement;\n        },\n        make(tag, data, children) {\n            if (Vue.config.isReservedTag(tag) && data.nativeOn) delete data.nativeOn;\n            let Node = this.$h(tag, parseProp(data), children || []);\n            Node.context = this.vm;\n            return Node;\n        },\n        aliasMap\n    });\n\n    extend(CreateNode, {\n        aliasMap,\n        alias(alias, name) {\n            aliasMap[alias] = name;\n        },\n        use(nodes) {\n            Object.keys(nodes).forEach((k) => {\n                const line = toLine(k);\n                const lower = toString(k).toLocaleLowerCase();\n                const v = nodes[k];\n                [k, line, lower].forEach(n => {\n                    CreateNode.alias(k, v);\n                    CreateNode.prototype[n] = function (data, children) {\n                        return this.make(v, data, children);\n                    };\n                });\n            });\n        }\n    })\n\n    return CreateNode;\n}\n","import mergeProps from '@form-create/utils/lib/mergeprops';\nimport unique from '@form-create/utils/lib/unique';\nimport extend from '@form-create/utils/lib/extend';\n\nexport function createManager(proto) {\n    class CustomManager extends Manager {\n    }\n\n    Object.assign(CustomManager.prototype, proto);\n    return CustomManager;\n}\n\nexport default function Manager(handler) {\n    extend(this, {\n        $handle: handler,\n        vm: handler.vm,\n        options: {},\n        ref: 'fcForm',\n        mergeOptionsRule: {\n            normal: ['form', 'row', 'info', 'submitBtn', 'resetBtn']\n        }\n    });\n    this.updateKey();\n    this.init();\n}\n\nextend(Manager.prototype, {\n    __init() {\n        this.$render = this.$handle.$render;\n        this.$r = (...args) => this.$render.renderRule(...args);\n    },\n    updateKey() {\n        this.key = unique();\n    },\n    //TODO interface\n    init() {\n    },\n    update() {\n    },\n    beforeRender() {\n    },\n    form() {\n        return this.vm.$refs[this.ref];\n    },\n    mergeOptions(args, opt) {\n        return mergeProps(args.map(v => this.tidyOptions(v)), opt, this.mergeOptionsRule);\n    },\n    updateOptions(options) {\n        this.options = this.mergeOptions([options], this.getDefaultOptions());\n        this.update();\n    },\n    tidyOptions(options) {\n        return options;\n    },\n    tidyRule(ctx) {\n    },\n    mergeProp(ctx) {\n    },\n    getDefaultOptions() {\n        return {};\n    },\n    render(children) {\n    }\n})\n","import {err} from '@form-create/utils/lib/console';\nimport fetch from './fetch';\nimport {invoke} from './util';\nimport is from '@form-create/utils/lib/type';\nimport deepSet from '@form-create/utils/lib/deepset';\n\nconst $fetch = {\n    name: 'fetch',\n    loaded(...args) {\n        run(...args);\n    },\n    watch(inject, rule, api) {\n        if (!run(inject, rule, api)) {\n            inject.clearProp();\n            api.sync(rule);\n        }\n    }\n};\n\nfunction parseOpt(option) {\n    if (is.String(option)) {\n        option = {\n            action: option,\n            to: 'options'\n        }\n    }\n    return option;\n}\n\nfunction run(inject, rule, api) {\n    let option = inject.value;\n    option = parseOpt(option);\n    if (!option || !option.action) {\n        return false;\n    }\n    if (!option.to) {\n        option.to = 'options';\n    }\n    const onError = option.onError;\n\n    const check = () => {\n        if (!inject.getValue()) {\n            inject.clearProp();\n            api.sync(rule);\n            return true;\n        }\n    }\n\n    const set = (val) => {\n        if (val === undefined) {\n            inject.clearProp();\n            api.sync(rule);\n        } else {\n            deepSet(inject.getProp(), option.to, val);\n        }\n    }\n\n    invoke(() => fetch({\n        ...option,\n        onSuccess(body) {\n            if (check()) return;\n            set((option.parse || ((v) => v.data))(body, rule, api))\n            api.sync(rule);\n        },\n        onError(e) {\n            set(undefined)\n            if (check()) return;\n            (onError || ((e) => err(e.message || 'fetch fail ' + option.action)))(e, rule, api);\n        }\n    }));\n\n    return true;\n}\n\nexport default $fetch;","import $FormCreate from '../components/formCreate';\nimport Vue from 'vue';\nimport makerFactory from '../factory/maker';\nimport Handle from '../handler';\nimport fetch from './fetch';\nimport {creatorFactory} from '..';\nimport BaseParser from '../factory/parser';\nimport {copyRule, copyRules, mergeGlobal, parseJson, toJson} from './util';\nimport fragment from '../components/fragment';\nimport is from '@form-create/utils/lib/type';\nimport toCase from '@form-create/utils/lib/tocase';\nimport extend from '@form-create/utils/lib/extend';\nimport {CreateNodeFactory} from '../factory/node';\nimport {createManager} from '../factory/manager';\nimport {arrayAttrs, keyAttrs, normalAttrs} from './attrs';\nimport {appendProto} from '../factory/creator';\nimport $fetch from './provider';\nimport {deepCopy} from '@form-create/utils/lib/deepextend';\n\nexport let _vue = typeof window !== 'undefined' && window.Vue ? window.Vue : Vue;\n\nfunction _parseProp(name, id) {\n    let prop;\n    if (arguments.length === 2) {\n        prop = arguments[1];\n        id = prop[name];\n    } else {\n        prop = arguments[2];\n    }\n    return {id, prop};\n}\n\nfunction nameProp() {\n    return _parseProp('name', ...arguments);\n}\n\nfunction _getEl(options) {\n    if (!options || !options.el) return window.document.body;\n    return is.Element(options.el)\n        ? options.el\n        : document.querySelector(options.el);\n}\n\nfunction mountForm(rules, option) {\n    const $vm = new _vue({\n        data() {\n            //todo 外部无法修改\n            return {rule: rules, option: option || {}};\n        },\n        render(h) {\n            return h('FormCreate', {ref: 'fc', props: this.$data});\n        }\n    });\n    $vm.$mount();\n    return $vm;\n}\n\nfunction exportAttrs(attrs) {\n    const key = attrs.key || [];\n    const array = attrs.array || [];\n    const normal = attrs.normal || [];\n    keyAttrs.push(...key);\n    arrayAttrs.push(...array);\n    normalAttrs.push(...normal);\n\n    appendProto([...key, ...array, ...normal]);\n}\n\n//todo 表单嵌套\nexport default function FormCreateFactory(config) {\n\n    const components = {\n        [fragment.name]: fragment\n    };\n    const parsers = {};\n    const directives = {};\n    const providers = {\n        fetch: $fetch\n    };\n    const maker = makerFactory();\n    let globalConfig = {global: {}};\n    const data = {};\n    const CreateNode = CreateNodeFactory();\n\n    exportAttrs(config.attrs || {});\n\n    function directive() {\n        const data = nameProp(...arguments);\n        if (data.id && data.prop) directives[data.id] = data.prop;\n    }\n\n    function register() {\n        const data = nameProp(...arguments);\n        if (data.id && data.prop) providers[data.id] = {...data.prop, name: data.id};\n    }\n\n    function componentAlias(alias) {\n        CreateNode.use(alias);\n    }\n\n    function parser() {\n        const data = nameProp(...arguments);\n        if (!data.id || !data.prop) return;\n        const name = toCase(data.id);\n        const parser = data.prop;\n        const base = parser.merge === true ? parsers[name] : undefined;\n        parsers[name] = {...(base || BaseParser), ...parser};\n        maker[name] = creatorFactory(name);\n        parser.maker && extend(maker, parser.maker);\n    }\n\n    function component(id, component) {\n        let name;\n        if (is.String(id)) {\n            name = toCase(id);\n            if (['form-create', 'formcreate'].indexOf(name) > -1) {\n                return $form();\n            } else if (component === undefined) {\n                return components[name];\n            }\n        } else {\n            name = toCase(id.name);\n            component = id;\n        }\n        if (!name || !component) return;\n        components[name] = component;\n        if (component.formCreateParser) parser(name, component.formCreateParser);\n    }\n\n    function $form() {\n        return _vue.extend($FormCreate(FormCreate));\n    }\n\n    //todo 检查回调函数作用域\n    function use(fn, opt) {\n        if (is.Function(fn.install)) fn.install(create, opt);\n        else if (is.Function(fn)) fn(create, opt);\n        return this;\n    }\n\n    function create(rules, _opt, parent) {\n        let $vm = mountForm(rules, _opt || {});\n        const _this = $vm.$refs.fc.formCreate;\n        _this.$parent = parent;\n        _getEl(_this.options).appendChild($vm.$el);\n        return _this.api();\n    }\n\n    function FormCreate(vm, rules, options) {\n        extend(this, {\n            vm,\n            manager: createManager(config.manager),\n            parsers,\n            providers,\n            rules: Array.isArray(rules) ? rules : [],\n            prop: {\n                components,\n                directives,\n            },\n            CreateNode,\n            bus: new _vue,\n            unwatch: null,\n            extendApi: config.extendApi || (api => api)\n        })\n        this.init();\n        this.initOptions(options || {});\n    }\n\n    extend(FormCreate.prototype, {\n        init() {\n            const vm = this.vm;\n            const h = new Handle(this);\n            this.$handle = h;\n            vm.$f = h.api;\n            vm.$emit('input', h.api);\n\n            vm.$on('hook:created', () => {\n                if (this.isSub()) {\n                    this.unwatch = vm.$watch(() => vm.$pfc.option, () => {\n                        this.initOptions(this.options);\n                        vm.$f.refresh();\n                    }, {deep: true});\n                    this.initOptions(this.options);\n                }\n                this.created();\n            })\n            vm.$on('hook:mounted', () => {\n                this.mounted();\n            });\n            vm.$on('hook:beforeDestroy', () => {\n                vm.destroyed = true;\n                this.unwatch && this.unwatch();\n                h.reloadRule([]);\n            });\n            vm.$on('hook:updated', () => {\n                h.bindNextTick(() => this.bus.$emit('next-tick', h.api));\n            });\n        },\n        isSub() {\n            return this.vm.$pfc && this.vm.extendOption;\n        },\n        initOptions(options) {\n            this.options = {formData: {}, submitBtn: {}, resetBtn: {}, ...deepCopy(globalConfig)};\n            if (this.isSub()) {\n                this.mergeOptions(this.options, this.vm.$pfc.$f.config || {}, true);\n            }\n            this.updateOptions(options);\n        },\n        mergeOptions(target, opt, parent) {\n            opt = deepCopy(opt);\n            parent && ['page', 'onSubmit', 'mounted', 'reload', 'formData', 'el'].forEach((n) => {\n                delete opt[n];\n            });\n            if (opt.global) {\n                target.global = mergeGlobal(target.global, opt.global);\n                delete opt.global;\n            }\n            this.$handle.$manager.mergeOptions([opt], target);\n            return target;\n        },\n        updateOptions(options) {\n            this.mergeOptions(this.options, options);\n            this.$handle.$manager.updateOptions(this.options);\n        },\n        created() {\n            this.$handle.init();\n        },\n        api() {\n            return this.$handle.api;\n        },\n        render() {\n            return this.$handle.render();\n        },\n        mounted() {\n            this.$handle.mounted();\n        },\n    })\n\n\n    function useAttr(formCreate) {\n        extend(formCreate, {\n            version: config.version,\n            ui: config.ui,\n            data,\n            maker,\n            component,\n            directive,\n            register,\n            parser,\n            use,\n            componentAlias,\n            copyRule,\n            copyRules,\n            fetch,\n            $form,\n            parseJson,\n            toJson,\n            init(rules, _opt = {}) {\n                let $vm = mountForm(rules, _opt), _this = $vm.$refs.fc.formCreate;\n                return {\n                    mount($el) {\n                        if ($el && is.Element($el))\n                            _this.options.el = $el;\n                        _getEl(_this.options).appendChild($vm.$el);\n                        return _this.api();\n                    },\n                    remove() {\n                        $vm.$el.parentNode && $vm.$el.parentNode.removeChild($vm.$el);\n                    },\n                    destroy() {\n                        this.remove();\n                        $vm.$destroy();\n                    },\n                    $f: _this.api()\n                };\n            }\n        });\n    }\n\n    function useStatic(formCreate) {\n        extend(formCreate, {\n            create,\n            install(Vue, options) {\n                globalConfig = {...globalConfig, ...(options || {})}\n                if (Vue._installedFormCreate === true) return;\n                Vue._installedFormCreate = true;\n                _vue = Vue;\n\n                const $formCreate = function (rules, opt = {}) {\n                    return create(rules, opt, this);\n                };\n\n                useAttr($formCreate);\n\n                Vue.prototype.$formCreate = $formCreate;\n                Vue.component('FormCreate', $form());\n            }\n        })\n    }\n\n    useAttr(create);\n    useStatic(create);\n\n    CreateNode.use({fragment: 'fcFragment'});\n\n    if (config.install) create.use(config);\n\n    return create;\n}\n"],"names":["$set","target","field","value","Vue","set","$del","_extends","Object","assign","a","b","c","arguments","length","d","prototype","hasOwnProperty","call","extend","apply","this","NAME","$FormCreate","FormCreate","name","componentName","model","prop","provide","$pfc","inject","props","rule","type","Array","required","option","extendOption","Boolean","api","data","formData","undefined","destroyed","validate","$f","isShow","unique","renderRule","updateValue","render","formCreate","methods","_refresh","_renderRule","_updateValue","JSON","stringify","$emit","watch","handler","n","setValue","deep","initOptions","refresh","every","v","_this","indexOf","$handle","reloadRule","beforeCreate","$options","propsData","options","keys","forEach","k","_this2","is","arg","toString","Undef","Element","_typeof","nodeType","trueArray","isArray","hasProperty","t","normalMerge","toArrayMerge","functionalMerge","mergeProps","objects","initial","opt","_normalMerge","_toArrayMerge","_functionalMerge","propsMerge","reduce","key","arrA","arrB","event","hook","mergeFn","fn1","fn2","keyAttrs","arrayAttrs","normalAttrs","attrs","deepExtend","origin","mode","isArr","clone","nst","_clone","getRule","filter","__ctrl","deepCopy","format","msg","tip","console","warn","err","error","logError","e","PREFIX","SUFFIX","$T","FUNCTION","toJson","obj","space","val","_isVue","__inject","__origin","__emit","makeFn","fn","eval","parseFn","String","trim","flag","replace","parseJson","json","parse","enumerable","writable","configurable","copyRule","copyRules","rules","mergeRule","merge","array","normal","Function","mergeGlobal","funcProxy","that","proxy","defineProperties","get","byCtx","__fc__","__origin__","invoke","def","toArray","toLine","line","toLocaleLowerCase","substr","id","uniqueId","Math","random","Number","Date","now","deepSet","idx","to","_data","split","baseRule","on","children","hidden","display","creatorFactory","init","title","maker","Creator","appendProto","setProp","constructor","commonMaker","create","make","createTmp","template","vm","makerFactory","factory","copy","byRules","ctxs","Api","h","tidyFields","fields","ctx","getCtx","$render","clearCache","allSubForm","subs","subForm","sub","push","helper","form","fieldCtx","getValue","coverValue","deferSyncValue","appendData","removeField","rm","removeRule","destroy","$el","parentNode","removeChild","$destroy","append","after","child","index","sort","root","splice","prepend","state","hiddenStatus","displayStatus","disabled","component","nameCtx","bind","reload","updateOptions","fc","onSubmit","sync","deleted","clearCacheAll","refreshOptions","$manager","hideForm","hide","changeStatus","clearChangeStatus","updateRule","r","updateRules","mergeRules","updateValidate","updateValidates","validates","refreshValidate","resetFields","defaultValue","refreshControl","method","el","Error","exec","args","trigger","$refs","ref","closeModal","getSubForm","nextTick","bus","$once","nextRefresh","changeValue","changeField","useCache","Render","initCache","cache","use","parent","setCache","vnode","getCache","toCase","str","lower","toLocaleUpperCase","toLowerCase","setTempProps","$props","injectProp","injectKeys","formCreateField","formCreateOptions","formCreateRule","temp","useRender","initRender","renderList","clearOrgChildren","initOrgChildren","orgChildren","$h","$createElement","beforeRender","vn","map","renderCtx","makeVm","getInjectData","g","global","cacheConfig","originType","trueType","setOptions","optionsTo","renderTemp","compile","$nextTick","parser","mounted","input","$on","_this3","onInput","renderSides","prefix","suffix","cacheFlag","_type","none","renderChildren","initProp","tidyRule","ctxProp","makeWrap","item","_this4","style","slot","custom","mergeProp","_this5","onMounted","addSubForm","getFormData","callback","expression","effect","isRm","_this6","rmCtx","isRepeatRule","loadChildren","defaultRender","vNode","alias","aliasMap","_this7","handle","CreateNode","useInject","Handler","parseInjectEvent","injectEvent","parseEmit","emitPrefix","emit","emitKey","eventName","eventInject","fieldKey","_inject","computed","self","_fn","watching","loading","unshift","EVENT","usePage","page","first","limit","getLimit","parseInt","pageEnd","pageLoad","pageFn","$off","loadRule","ceil","clearNextTick","clearTimeout","bindNextTick","setTimeout","loadedId","RuleContext","wrapRef","linkOn","ctrlRule","payload","updateType","updateKey","update","useLoader","parseRule","_rule","fullRule","syncProp","pre","fapi","repeatRule","cycleLoad","_loadRule","syncForm","initEvent","ruleEffect","check","isCtrl","bindParser","appendValue","setCtx","_preIndex","preIndex","i","updated","refreshUpdate","defineProperty","valueHandle","control","useCtrl","controls","getCtrl","handleFn","valid","ctrl","findCtrl","reverse","ruleCon","ctrlCtx","_reloadRule","initData","reloading","nextReload","useInput","cacheValue","toValue","formValue","setFlag","setFormData","syncValue","valueChange","isQuote","isChange","toEmpty","toFormValue","deferSyncFn","refreshRule","appendLink","link","useHelper","findField","findName","find","concat","effectData","clearEffectData","setParser","unwatch","un","unlink","watchTo","watchCtx","rmCtrl","$api","_rm","noWatch","getType","BaseParser","useContext","isMounted","getParser","list","parsers","noWatchFn","$watch","o","rmSub","watchEffect","f","useLifecycle","_mounted","lifecycle","useEffect","useProvider","ps","providers","_c","getComponent","onEffect","provider","used","_used","emitEffect","getEffect","attr","p","getProp","clearProp","arr","components","manager","extendApi","getError","action","xhr","status","url","getBody","text","responseText","response","fetch","XMLHttpRequest","onerror","onError","onload","onSuccess","open","dataType","FormData","setRequestHeader","withCredentials","headers","send","__init","functional","parseProp","domProps","innerHTML","CreateNodeFactory","setVm","tag","config","isReservedTag","nativeOn","Node","context","nodes","createManager","proto","CustomManager","Manager","mergeOptionsRule","$r","mergeOptions","tidyOptions","getDefaultOptions","$fetch","loaded","run","parseOpt","body","message","_vue","window","_parseProp","nameProp","_getEl","document","querySelector","mountForm","$vm","$data","$mount","exportAttrs","FormCreateFactory","fragment","directives","globalConfig","directive","register","componentAlias","base","$form","formCreateParser","install","_opt","$parent","appendChild","useAttr","version","ui","mount","remove","Handle","isSub","created","submitBtn","resetBtn","_installedFormCreate","$formCreate"],"mappings":"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"}